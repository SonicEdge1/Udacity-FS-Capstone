#!/bin/bash

# must be in the /backend folder before running script
MY_PWD=$(pwd);
LAST_DIR=${MY_PWD##*/}
EXPECTED_DIR="backend"
if [[ {$LAST_DIR} = {$EXPECTED_DIR} ]]; then
    echo "Operating in expected directory: " $EXPECTED_DIR;
else
    echo "NOT in expected directory: " $EXPECTED_DIR "   exiting script... ";
    exit 1;
fi
source ./env/bin/activate
pip install -r requirements.txt

export FLASK_ENV=development
export AUTH0_CLIENT_ID=OhcNdLC90mi5E0R77RlC526RP1Khrl7q
export AUTH0_CLIENT_SECRET='aRBc0oGvvYq2tLDk89736MFh4Kky68yoPWNvYYGKSJVsaD97bkesz4tE_mUS1dso'
export AUTH0_API_BASE_URL=https://joes-casting-agency.us.auth0.com
export AUTH0_CALLBACK_URL=http://127.0.0.1:5000/callback
export AUTH0_API_AUDIENCE='CastingAgencyAPI'
export AUTH0_DOMAIN=joes-casting-agency.us.auth0.com
export AUTH0_ALGORITHMS=['RS256']

export SECRET_KEY='aRBc0oGvvYq2VsaD97bkesz4tE_mUS1dso'
export SESSION_KEY="access_token"
export FLASK_ENV=development
export FLASK_APP=api.py
export FLASK_DEBUG=true
export EXEC_JWT='eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjNYYW5ieVliZHBoTmUyTFB4bC1nSSJ9.eyJpc3MiOiJodHRwczovL2pvZXMtY2FzdGluZy1hZ2VuY3kudXMuYXV0aDAuY29tLyIsInN1YiI6ImF1dGgwfDYxZGYxNjkzYTFlM2FjMDA2OWVhMGZiOSIsImF1ZCI6WyJDYXN0aW5nQWdlbmN5QVBJIiwiaHR0cHM6Ly9qb2VzLWNhc3RpbmctYWdlbmN5LnVzLmF1dGgwLmNvbS91c2VyaW5mbyJdLCJpYXQiOjE2NDI2MTU2MDcsImV4cCI6MTY0MzIyMDQwNywiYXpwIjoiT2hjTmRMQzkwbWk1RTBSNzdSbEM1MjZSUDFLaHJsN3EiLCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwicGVybWlzc2lvbnMiOlsiZGVsZXRlOmFjdG9yIiwiZGVsZXRlOm1vdmllIiwiZ2V0OmFjdG9ycy1hbmQtbW92aWVzIiwiZ2V0OmRhc2hib2FyZCIsInBhdGNoOmFjdG9ycy1hbmQtbW92aWVzIiwicG9zdDphY3RvciIsInBvc3Q6bW92aWUiXX0.brabOGdocQUTTtGGvTla3wkZApk0XzMtzcKKNX6QN041_e-NibTT8_2SnJI352mWYkLjq2WfNG-NfRW4ZG8N-9Z51ZfOGVKzWTA-XNVq9AVVjtgPbI4rcSJyVC7-JM4n0MoYB-znOCqPoM9j_ieK86IGgEYrM2cRQyrAOfoXBpt4nOAk6uQqugcHkh_zK56ek6KdbwwdMs4q72sU5HPcsAbYCIlshkk8XoGQpyDapKZWFanK8qVvktWFl3Asg6oqnmJjsaVm-GE4pBNxexW8XYQG6i3eAaQ-cjwb-JIHQpXlbqre70c3qJ-kzrUfwTMJDPzLWaJXp2m1lFrMAxJR2g'
export DIRECT_JWT='eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjNYYW5ieVliZHBoTmUyTFB4bC1nSSJ9.eyJpc3MiOiJodHRwczovL2pvZXMtY2FzdGluZy1hZ2VuY3kudXMuYXV0aDAuY29tLyIsInN1YiI6ImF1dGgwfDYxZGYxNDNkN2E5NThjMDA3MGE0NjcyZCIsImF1ZCI6WyJDYXN0aW5nQWdlbmN5QVBJIiwiaHR0cHM6Ly9qb2VzLWNhc3RpbmctYWdlbmN5LnVzLmF1dGgwLmNvbS91c2VyaW5mbyJdLCJpYXQiOjE2NDI2MTU2NzAsImV4cCI6MTY0MzIyMDQ3MCwiYXpwIjoiT2hjTmRMQzkwbWk1RTBSNzdSbEM1MjZSUDFLaHJsN3EiLCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwicGVybWlzc2lvbnMiOlsiZGVsZXRlOmFjdG9yIiwiZ2V0OmFjdG9ycy1hbmQtbW92aWVzIiwiZ2V0OmRhc2hib2FyZCIsInBhdGNoOmFjdG9ycy1hbmQtbW92aWVzIiwicG9zdDphY3RvciJdfQ.BM7MoxpC3dEBdK5HUPoDc6rhu77RDr2D7NSfagHvYYJ0Vx-Pn-YMFXM8_IdY5l9f-vkivsP4q-z2UM93LPZfrcdfRbUFSltKVDKXeUieT3g9IIuj_UePP79MFur9-Qt0UM-VqY3s9tl7OF7I5Hg1GLfWAXesiL1pM4cQ-cSsLNpMZJjos0LTJAP5FTaMuqeV06euniiNAqQqlzgRVYg5iIHpXfN6_KLIBCihpQNcQ-7UCVTuEepvrJ0svk80CJzlDMlAlR-9CK8SCJ07lPtKnyAG4BO0AwlFWTAerL0qRK8Lpp1BsIy3N_KVSO58KhO6xtAqM9Pq0WYIF0W3LjeXYQ'
export ASSIST_JWT='eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjNYYW5ieVliZHBoTmUyTFB4bC1nSSJ9.eyJpc3MiOiJodHRwczovL2pvZXMtY2FzdGluZy1hZ2VuY3kudXMuYXV0aDAuY29tLyIsInN1YiI6ImF1dGgwfDYxZDhjMThmODEzYzFkMDA2YTk1ZTZmMyIsImF1ZCI6WyJDYXN0aW5nQWdlbmN5QVBJIiwiaHR0cHM6Ly9qb2VzLWNhc3RpbmctYWdlbmN5LnVzLmF1dGgwLmNvbS91c2VyaW5mbyJdLCJpYXQiOjE2NDI2MTU3MDQsImV4cCI6MTY0MzIyMDUwNCwiYXpwIjoiT2hjTmRMQzkwbWk1RTBSNzdSbEM1MjZSUDFLaHJsN3EiLCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwicGVybWlzc2lvbnMiOlsiZ2V0OmFjdG9ycy1hbmQtbW92aWVzIiwiZ2V0OmRhc2hib2FyZCJdfQ.pldCv2c1c3toXS1NX1og7v4QCHUHg5mIFoC7XZITnznw1z6KES1b_N5h1voN43Kl3Enoq_rboG1UACDI-WyFSEWcybQkJw0Q-12eRRJySdTARSVBhAHFkC2G76U1C-yZq9vgVb9ienm3icgJV6g_7_CRF5ZrQFCpfDwcfuim1FVn2lJ9eFsKWIaat9SV-Q6wDl4VhyJDOf5OBwNcfx1iCjVYBgo-FehF5953KoutuY1ieTkz2USnlr3pwmQcmF18syPwO3LT84vA-jIsSCx22dHSK0xMd9U3k9gpgMfWdIuAFEaamFGIaWmz8Vl4ZcYblxOvf-XvPwCPqLjC8UmkYg'
# flask run --reload
echo "done";
